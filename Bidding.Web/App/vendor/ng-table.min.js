(function(n,t){"use strict";if(typeof define=="function"&&define.amd)define(["angular"],function(n){return t(n)});else return t(n)})(angular||null,function(n){"use strict";var t=n.module("ngTable",[]),i;return t.factory("ngTableParams",["$q","$log",function(t,i){var r=function(n){return!isNaN(parseFloat(n))&&isFinite(n)};return function(u,f){var h=this,s=function(){e.debugMode&&i.debug&&i.debug.apply(this,arguments)},o,e;return this.data=[],this.parameters=function(t,i){var u,e,l,f,h,v,a,c;if(i=i||!1,n.isDefined(t)){for(u in t)if(e=t[u],i&&u.indexOf("[")>=0){for(l=u.split(/\[(.*)\]/).reverse(),f="",h=0,v=l.length;h<v;h++)a=l[h],a!==""&&(c=e,e={},e[f=a]=r(c)?parseFloat(c):c);f==="sorting"&&(o[f]={});o[f]=n.extend(o[f]||{},e[f])}else o[u]=r(t[u])?parseFloat(t[u]):t[u];return s("ngTable: set parameters",o),this}return o},this.settings=function(t){return n.isDefined(t)?(n.isArray(t.data)&&(t.total=t.data.length),e=n.extend(e,t),s("ngTable: set settings",e),this):e},this.page=function(t){return n.isDefined(t)?this.parameters({page:t}):o.page},this.total=function(t){return n.isDefined(t)?this.settings({total:t}):e.total},this.count=function(t){return n.isDefined(t)?this.parameters({count:t,page:1}):o.count},this.filter=function(t){return n.isDefined(t)?this.parameters({filter:t}):o.filter},this.sorting=function(t){if(arguments.length==2){var i={};return i[t]=arguments[1],this.parameters({sorting:i}),this}return n.isDefined(t)?this.parameters({sorting:t}):o.sorting},this.isSortBy=function(t,i){return n.isDefined(o.sorting[t])&&o.sorting[t]==i},this.orderBy=function(){var n=[];for(var t in o.sorting)n.push((o.sorting[t]==="asc"?"+":"-")+t);return n},this.getData=function(t,i){n.isArray(this.data)&&n.isObject(i)?t.resolve(this.data.slice((i.page()-1)*i.count(),i.page()*i.count())):t.resolve([])},this.getGroups=function(i,r){var u=t.defer();u.promise.then(function(t){var u={},f,e;n.forEach(t,function(t){var i=n.isFunction(r)?r(t):t[r];u[i]=u[i]||{data:[]};u[i].value=i;u[i].data.push(t)});f=[];for(e in u)f.push(u[e]);s("ngTable: refresh groups",f);i.resolve(f)});this.getData(u,h)},this.generatePagesArray=function(n,t,i){var h,o,s,e,u,f,r;if(h=11,f=[],u=Math.ceil(t/i),u>1){for(f.push({type:"prev",number:Math.max(1,n-1),active:n>1}),f.push({type:"first",number:1,active:n>1}),s=Math.round((h-5)/2),e=Math.max(2,n-s),o=Math.min(u-1,n+s*2-(n-e)),e=Math.max(2,e-(s*2-(o-e))),r=e;r<=o;)r===e&&r!==2||r===o&&r!==u-1?f.push({type:"more",active:!1}):f.push({type:"page",number:r,active:n!==r}),r++;f.push({type:"last",number:u,active:n!==u});f.push({type:"next",number:Math.min(u,n+1),active:n<u})}return f},this.url=function(t){var r,f,i,e,u,s;t=t||!1;r=t?[]:{};for(f in o)if(o.hasOwnProperty(f))if(i=o[f],e=encodeURIComponent(f),typeof i=="object")for(u in i)n.isUndefined(i[u])||i[u]===""||(s=e+"["+encodeURIComponent(u)+"]",t?r.push(s+"="+i[u]):r[s]=i[u]);else n.isFunction(i)||n.isUndefined(i)||i===""||(t?r.push(e+"="+encodeURIComponent(i)):r[e]=encodeURIComponent(i));return r},this.reload=function(){var i=t.defer(),n=this;e.$loading=!0;e.groupBy?e.getGroups(i,e.groupBy,this):e.getData(i,this);s("ngTable: reload data");i.promise.then(function(t){e.$loading=!1;s("ngTable: current scope",e.$scope);n.data=e.groupBy?e.$scope.$groups=t:e.$scope.$data=t;e.$scope.pages=n.generatePagesArray(n.page(),n.total(),n.count());e.$scope.$emit("ngTableAfterReloadData")})},this.reloadPages=function(){var n=this;e.$scope.pages=n.generatePagesArray(n.page(),n.total(),n.count())},o=this.$params={page:1,count:1,filter:{},sorting:{},group:{},groupBy:null},e={$scope:null,$loading:!1,data:null,total:0,defaultSort:"asc",filterDelay:750,counts:[10,25,50,100],getGroups:this.getGroups,getData:this.getData},this.settings(f),this.parameters(u,!0),this}}]),i=["$scope","ngTableParams","$timeout",function(t,i,r){t.$loading=!1;t.params||(t.params=new i);t.params.settings().$scope=t;var u=function(){var n=0;return function(t,i){r.cancel(n);n=r(t,i)}}();t.$watch("params.$params",function(i,r){t.params.settings().$scope=t;n.equals(i.filter,r.filter)?t.params.reload():u(function(){t.params.$params.page=1;t.params.reload()},t.params.settings().filterDelay)},!0);t.sortBy=function(n,i){var r=t.parse(n.sortable);if(r){var u=t.params.settings().defaultSort,e=u==="asc"?"desc":"asc",o=t.params.sorting()&&t.params.sorting()[r]&&t.params.sorting()[r]===u,f=i.ctrlKey||i.metaKey?t.params.sorting():{};f[r]=o?e:u;t.params.parameters({sorting:f})}}}],t.directive("ngTable",["$compile","$q","$parse",function(t,r,u){return{restrict:"A",priority:1001,scope:!0,controller:i,compile:function(i){var r=[],o=0,f=null,e=i.find("thead");if(n.forEach(n.element(i.find("tr")),function(t){t=n.element(t);t.hasClass("ng-table-group")||f||(f=t)}),f)return n.forEach(f.children("td"),function(t){var i=n.element(t);if(!i.attr("ignore-cell")||"true"!==i.attr("ignore-cell")){var e=function(n,t){return function(f){return u(i.attr("x-data-"+n)||i.attr("data-"+n)||i.attr(n))(f,{$columns:r})||t}},s=e("title"," "),l=e("header",!1),f=e("filter",!1)(),h=!1,c=!1;f&&f.$$name&&(c=f.$$name,delete f.$$name);f&&f.templateURL&&(h=f.templateURL,delete f.templateURL);i.attr("data-title-text",s());r.push({id:o++,title:s,sortable:e("sortable",!1),"class":i.attr("x-data-header-class")||i.attr("data-header-class")||i.attr("header-class"),filter:f,filterTemplateURL:h,filterName:c,headerTemplateURL:l,filterData:i.attr("filter-data")?i.attr("filter-data"):null,show:i.attr("ng-show")?function(n){return u(i.attr("ng-show"))(n)}:function(){return!0}})}}),function(i,f,o){var s,h,c;i.$loading=!1;i.$columns=r;i.$watch(o.ngTable,function(t){n.isUndefined(t)||(i.paramsModel=u(o.ngTable),i.params=t)},!0);i.parse=function(t){return n.isDefined(t)?t(i):""};o.showFilter&&i.$parent.$watch(o.showFilter,function(n){i.show_filter=n});n.forEach(r,function(t){var r;if(t.filterData){if(r=u(t.filterData)(i,{$column:t}),!(n.isObject(r)&&n.isObject(r.promise)))throw new Error("Function "+t.filterData+" must be instance of $q.defer()");return delete t.filterData,r.promise.then(function(i){n.isArray(i)||(i=[]);i.unshift({title:"-",id:""});t.data=i})}});f.hasClass("ng-table")||(i.templates={header:o.templateHeader?o.templateHeader:"ng-table/header.html",pagination:o.templatePagination?o.templatePagination:"ng-table/pager.html"},s=e.length>0?e:n.element(document.createElement("thead")).attr("ng-include","templates.header"),h=n.element(document.createElement("div")).attr({"ng-table-pagination":"params","template-url":"templates.pagination"}),f.find("thead").remove(),f.addClass("ng-table").prepend(s),c=f,f.parents(".table-responsive").length&&(c=f.parents(".table-responsive")),c.after(h),t(s)(i),t(h)(i))}}}}]),t.directive("ngTablePagination",["$compile",function(t){return{restrict:"A",scope:{params:"=ngTablePagination",templateUrl:"="},replace:!1,link:function(i,r){i.params.settings().$scope.$on("ngTableAfterReloadData",function(){i.pages=i.params.generatePagesArray(i.params.page(),i.params.total(),i.params.count())},!0);i.$watch("templateUrl",function(u){if(!n.isUndefined(u)){var f=n.element(document.createElement("div"));f.attr({"ng-include":"templateUrl"});r.append(f);t(f)(i)}})}}}]),n.module("ngTable").run(["$templateCache",function(n){n.put("ng-table/filters/select-multiple.html",'<select ng-options="data.id as data.title for data in column.data" multiple ng-multiple="true" ng-model="params.filter()[name]" ng-show="filter==\'select-multiple\'" class="filter filter-select-multiple form-control input-sm" name="{{column.filterName}}"> <\/select>');n.put("ng-table/filters/select.html",'<select ng-options="data.id as data.title for data in column.data" ng-model="params.filter()[name]" ng-show="filter==\'select\'" class="filter filter-select form-control input-sm" name="{{column.filterName}}"> <\/select>');n.put("ng-table/filters/text.html",'<input type="text" name="{{column.filterName}}" ng-model="params.filter()[name]" ng-if="filter==\'text\'" class="input-filter form-control input-sm"/>');n.put("ng-table/filters/date.html",'<input type="date" name="{{column.filterName}}" ng-model="params.filter()[name]" ng-if="filter==\'date\'" class="input-filter form-control input-sm"/>');n.put("ng-table/header.html",'<tr> <th ng-repeat="column in $columns" ng-class="{ \'sortable\': parse(column.sortable), \'sort-asc\': params.sorting()[parse(column.sortable)]==\'asc\', \'sort-desc\': params.sorting()[parse(column.sortable)]==\'desc\' }" ng-click="sortBy(column, $event)" ng-show="column.show(this)" ng-init="template=column.headerTemplateURL(this)" class="header {{column.class}}"> <div ng-if="!template" ng-show="!template" ng-bind="parse(column.title)"><\/div> <div ng-if="template" ng-show="template"><div ng-include="template"><\/div><\/div> <\/th> <\/tr> <tr ng-show="show_filter" class="ng-table-filters"> <th ng-repeat="column in $columns" ng-show="column.show(this)" class="filter"> <div ng-repeat="(name, filter) in column.filter"> <div ng-if="column.filterTemplateURL" ng-show="column.filterTemplateURL"> <div ng-include="column.filterTemplateURL"><\/div> <\/div> <div ng-if="!column.filterTemplateURL" ng-show="!column.filterTemplateURL"> <div ng-include="\'ng-table/filters/\' + filter + \'.html\'"><\/div> <\/div> <\/div> <\/th> <\/tr>');n.put("ng-table/pager.html",'<div class="ng-cloak ng-table-pager"> <div ng-if="params.settings().counts.length" class="ng-table-counts btn-group pull-right"> <button ng-repeat="count in params.settings().counts" type="button" ng-class="{\'active\':params.count()==count}" ng-click="params.count(count)" class="btn btn-default"> <span ng-bind="count"><\/span> <\/button> <\/div> <ul class="pagination ng-table-pagination"> <li ng-class="{\'disabled\': !page.active}" ng-repeat="page in pages" ng-switch="page.type"> <a ng-switch-when="prev" ng-click="params.page(page.number)" href="">&laquo;<\/a> <a ng-switch-when="first" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"><\/span><\/a> <a ng-switch-when="page" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"><\/span><\/a> <a ng-switch-when="more" ng-click="params.page(page.number)" href="">&#8230;<\/a> <a ng-switch-when="last" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"><\/span><\/a> <a ng-switch-when="next" ng-click="params.page(page.number)" href="">&raquo;<\/a> <\/li> <\/ul> <\/div> ')}]),t});